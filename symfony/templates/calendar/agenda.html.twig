{% extends 'calendar/base.html.twig' %}

{% block title %}HCPSS Calendar Agenda{% endblock %}

{% block content %}
    <table class="table agenda">
        <tbody>
        {% set prev_occurrence = occurrences[0] %}
        {% for occurrence in occurrences %}
            {% if occurrence.start|date('Y-m-d') != prev_occurrence.start|date('Y-m-d') or loop.first %}
                <tr class="date-title">
                    <td colspan="2">
                        <h6 class="title is-6">
                            <time datetime="{{ occurrence.start|date('Y-m-d') }}">
                                {{ occurrence.start|date('l, F j') }}
                            </time>
                        </h6>
                    </td>
                </tr>
            {% endif %}
                <tr>
                    {% if not occurrence.isAllDay %}
                        <td class="time">
                            <time datetime="{{ occurrence.start|date('c') }}">{{ occurrence.start|date('g:i a') }}</time> -
                            <time datetime="{{ occurrence.end|date('c') }}">{{ occurrence.end|date('g:i a') }}</time>
                        </td>
                    {% endif %}

                    <td{% if occurrence.isAllDay %} colspan="2"{% endif %}>
                        <div class="occurrence-title">
                            {{ occurrence.title }}
                            {% if occurrence.title == 'A' or occurrence.title == 'B' %}
                                - day
                            {% endif %}
                        </div>
                        {% if occurrence.description %}
                            <div>{{ occurrence.description|raw|nl2br }}</div>
                        {% endif %}
                    </td>
                </tr>
            {% set prev_occurrence = occurrence %}
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
